<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="paulapivat">

  
  
  
    
  
  <meta name="description" content="Building tools to describe a data and find relationships">

  
  <link rel="alternate" hreflang="en-us" href="/post/dsfs_5/">

  


  
  
  
  <meta name="theme-color" content="#E32626">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Domine:wght@400;700&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/dsfs_5/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@paulapivat">
  <meta property="twitter:creator" content="@paulapivat">
  
  <meta property="og:site_name" content="Paul Apivat">
  <meta property="og:url" content="/post/dsfs_5/">
  <meta property="og:title" content="Data Science from Scratch (ch5) - Statistics | Paul Apivat">
  <meta property="og:description" content="Building tools to describe a data and find relationships"><meta property="og:image" content="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-11-19T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-11-19T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/dsfs_5/"
  },
  "headline": "Data Science from Scratch (ch5) - Statistics",
  
  "datePublished": "2020-11-19T00:00:00Z",
  "dateModified": "2020-11-19T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "paulapivat"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Paul Apivat",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Building tools to describe a data and find relationships"
}
</script>

  

  


  


  





  <title>Data Science from Scratch (ch5) - Statistics | Paul Apivat</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Paul Apivat</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Paul Apivat</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/#"><span>Start Here</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#gallery"><span>Data Viz</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/"><span></span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/technical_notes/"><span>Technical Notes</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Data Science from Scratch (ch5) - Statistics</h1>

  
  <p class="page-subtitle">Descriptive Statistics &amp; Correlations</p>
  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span><a href="/author/paulapivat/">paulapivat</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Nov 19, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    11 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <h3 id="table-of-contents">Table of contents</h3>
<ul>
<li>
<a href="#describing">Describing Data</a></li>
<li>
<a href="#correlation">Finding Relationships in Data</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>This post is chapter 5 in continuation of my coverage of 
<a href="https://joelgrus.com/2019/05/13/data-science-from-scratch-second-edition/" target="_blank" rel="noopener">Data Science from Scratch by Joel Grus</a>.</p>
<p>It should be noted upfront that everything covered in this post can be done more expediently and efficiently in libraries like 
<a href="https://numpy.org/" target="_blank" rel="noopener">NumPy</a> as well as the 
<a href="https://github.com/python/cpython/blob/3.9/Lib/statistics.py" target="_blank" rel="noopener">statistics module in Python</a>.</p>
<p>The primary value of this book, and by extension this post, in my opinion, is the emphasis on <strong>learning</strong> how Python primitives can be used to build tools from the ground up.</p>
<p>Specifically, we&rsquo;ll examine how specific features of the Python language as well as functions we built in a previous post on 
<a href="https://paulapivat.com/post/dsfs_4/" target="_blank" rel="noopener">linear algebra</a> can be used to build tools used to <em>describe</em> data and relationships within data (aka <strong>statistics</strong>).</p>
<p>I think this is pretty cool. Hopefully you agree.</p>
<h4 id="example-data">Example Data</h4>
<p>This chapter continues the narrative of you as a newly hired data scientist at DataScienster, the social network for data scientists, and your job is to <em>describe</em> how many friends members in this social network has. We have two <code>lists</code> of <code>float</code> to work with. We&rsquo;ll work with <code>num_friends</code> first, then <code>daily_minutes</code> later.</p>
<p>I wanted this post to be self-contained, and in order to do that we&rsquo;ll have to read in a larger than average <code>list</code> of <code>floats</code>. The alternative would be to get the data directly from the book&rsquo;s 
<a href="https://github.com/joelgrus/data-science-from-scratch/blob/master/scratch/statistics.py" target="_blank" rel="noopener">github repo (statistics.py)</a></p>
<pre><code class="language-python">num_friends = [100.0,49,41,40,25,21,21,19,19,18,18,16,15,15,15,15,14,14,13,13,13,13,12,12,11,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

daily_minutes = [1,68.77,51.25,52.08,38.36,44.54,57.13,51.4,41.42,31.22,34.76,54.01,38.79,47.59,49.1,27.66,41.03,36.73,48.65,28.12,46.62,35.57,32.98,35,26.07,23.77,39.73,40.57,31.65,31.21,36.32,20.45,21.93,26.02,27.34,23.49,46.94,30.5,33.8,24.23,21.4,27.94,32.24,40.57,25.07,19.42,22.39,18.42,46.96,23.72,26.41,26.97,36.76,40.32,35.02,29.47,30.2,31,38.11,38.18,36.31,21.03,30.86,36.07,28.66,29.08,37.28,15.28,24.17,22.31,30.17,25.53,19.85,35.37,44.6,17.23,13.47,26.33,35.02,32.09,24.81,19.33,28.77,24.26,31.98,25.73,24.86,16.28,34.51,15.23,39.72,40.8,26.06,35.76,34.76,16.13,44.04,18.03,19.65,32.62,35.59,39.43,14.18,35.24,40.13,41.82,35.45,36.07,43.67,24.61,20.9,21.9,18.79,27.61,27.21,26.61,29.77,20.59,27.53,13.82,33.2,25,33.1,36.65,18.63,14.87,22.2,36.81,25.53,24.62,26.25,18.21,28.08,19.42,29.79,32.8,35.99,28.32,27.79,35.88,29.06,36.28,14.1,36.63,37.49,26.9,18.58,38.48,24.48,18.95,33.55,14.24,29.04,32.51,25.63,22.22,19,32.73,15.16,13.9,27.2,32.01,29.27,33,13.74,20.42,27.32,18.23,35.35,28.48,9.08,24.62,20.12,35.26,19.92,31.02,16.49,12.16,30.7,31.22,34.65,13.13,27.51,33.2,31.57,14.1,33.42,17.44,10.12,24.42,9.82,23.39,30.93,15.03,21.67,31.09,33.29,22.61,26.89,23.48,8.38,27.81,32.35,23.84]

daily_hours = [dm / 60 for dm in daily_minutes]
</code></pre>
<h2 id="describing">Describing</h2>
<p>The <code>num_friends</code> list is a list of numbers representing &ldquo;number of friends&rdquo; a person has, so for example, one person has 100 friends. The first thing we do to describe the data is to create a bar chart plotting the number of people who have 100 friends, 49 friends, 41 friends, and so on.</p>
<p>We&rsquo;ll import <code>Counter</code> from <code>collections</code> and import <code>matplotlib.pyplot</code>.</p>
<p>We&rsquo;ll use <code>Counter</code> to turn <code>num_friends</code> list into a <code>defaultdict(int)</code>-like object mapping keys to counts. For more info, please refer to this 
<a href="https://paulapivat.com/post/dsfs_2/#counters" target="_blank" rel="noopener">previous post</a> on the Counters.</p>
<p>Once we use the <code>Counter</code> collection, a 
<a href="https://docs.python.org/2/library/collections.html" target="_blank" rel="noopener">high-performance container datatype</a>, we can use methods like <code>most_common</code> to find the keys with the most common values. Here we see that the five most common <em>number of friends</em> are 6, 1, 4, 3 and 9, respectively.</p>
<pre><code class="language-python">from collections import Counter

import matplotlib.pyplot as plt

friend_counts = Counter(num_friends)

# the five most common values are: 6, 1, 4, 3 and 9 friends
# [(6, 22), (1, 22), (4, 20), (3, 20), (9, 18)]
friend_counts.most_common(5) 
</code></pre>
<p>To proceed with plotting, we&rsquo;ll use <code>friend_counts</code> to create a <code>list comprehension</code> that will loop through <code>friends_count</code> and for all <strong>keys</strong> from 0-101 (xs) and print a corresponding <strong>value</strong> (if it exists). This becomes the y-axis to <code>num_friends</code>, which is the x-axis:</p>
<pre><code class="language-python">xs = range(101)                     # x-axis: largest num_friend value is 100
ys = [friend_counts[x] for x in xs] # y-axis
plt.bar(xs, ys)
plt.axis([0, 101, 0, 25])
plt.title(&quot;Histogram of Friend Counts&quot;)
plt.xlabel(&quot;# of friends&quot;)
plt.ylabel(&quot;# of people&quot;)
plt.show()
</code></pre>
<p>Here is the plot below. You can see one person with 100 friends.</p>
<p><img src="./histo_friend_counts.png" alt="histo_friend_counts.png"></p>
<p>You can also read more about data visualization 
<a href="https://paulapivat.com/post/dsfs_3/" target="_blank" rel="noopener">here</a>.</p>
<p>Alternatively, we could generate simple statistics to describe the data using built-in Python methods: <code>len</code>, <code>min</code>, <code>max</code> and <code>sorted</code>.</p>
<pre><code class="language-python">num_points = len(num_friends) # number of data points in num_friends: 204
largest_value = max(num_friends) # largest value in num_friends: 100
smallest_value = min(num_friends) # smallest value in num_friends: 1

sorted_values = sorted(num_friends) # sort the values in ascending order
second_largest_value = sorted_values[-2] # second largest value from the back: 49
</code></pre>
<h3 id="central-tendencies">Central Tendencies</h3>
<p>The most common way of describing a set of data is to find it&rsquo;s <strong>mean</strong>, which is the sum of all the values, divided by the number of values. <em>note</em> : we&rsquo;ll continue to use type annotations. In my opinion, it helps you be a more deliberate and mindful Python programmer.</p>
<pre><code class="language-python">from typing import List

def mean(xs: List[float]) -&gt; float:
    return sum(xs) / len(xs)
    
assert 7.3333 &lt; mean(num_friends) &lt; 7.3334
</code></pre>
<p>However, the mean is <strong>notoriously sensitive to outliers</strong> so statisticians often supplement with other measures of central tendencies like <strong>median</strong>. Because the median is the <em>middle-most value</em>, it matters whether there is an <em>even</em> or <em>odd</em> number of data points.</p>
<p>Here, we&rsquo;ll create two private functions for both situations - even and odd number of data points - in calculating the median. First, we&rsquo;ll sort the data values. Then, for <em>even number</em> values, we&rsquo;ll find the two middle values and split them. For <em>odd number</em> of values, we&rsquo;ll divide the <em>length</em> of the dataset by 2 (i.e., 50).</p>
<p>Our median function will return either of the private function <code>_median_even</code> or <code>_median_odd</code> conditionally depending on if the length of a list of numbers is divisible (%2==0) by 2.</p>
<pre><code class="language-python">def _median_even(xs: List[float]) -&gt; float:
    &quot;&quot;&quot;If len(xs) is even, it's the average of the middle two elements&quot;&quot;&quot;
    sorted_xs = sorted(xs)
    hi_midpoint = len(xs) // 2   # e.g. length 4 =&gt; hi_midpoint 2
    return (sorted_xs[hi_midpoint - 1] + sorted_xs[hi_midpoint]) / 2
    
def _median_odd(xs: List[float]) -&gt; float:
    &quot;&quot;&quot;If len(xs) is odd, its the middle element&quot;&quot;&quot;
    return sorted(xs)[len(xs) // 2]
    
def median(v: List[float]) -&gt; float:
    &quot;&quot;&quot;Finds the 'middle-most' value of v&quot;&quot;&quot;
    return _median_even(v) if len(v) % 2 == 0 else _median_odd(v)
    
assert median([1,10,2,9,5]) == 5
assert median([1, 9, 2, 10]) == (2 + 9) / 2
</code></pre>
<p>Because the median is the <em>middle-most value</em>, it does not fully depend on every value in the data. For illustration, hypothetically if we have a another list <code>num_friends2</code> where one person had 10,000 friends, the <strong>mean</strong> would be much more sensitive to that change than the <strong>median</strong> would be.</p>
<pre><code class="language-python">num_friends2 = [10000.0,49,41,40,25,21,21,19,19,18,18,16,15,15,15,15,14,14
    ,13,13,13,13,12,12,11,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9
    ,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7
    ,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5
    ,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3
    ,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1
    ,1,1,1,1,1,1,1,1,1,1,1,1]
    
mean(num_friends2)   # more sensitive to outliers: 7.333 =&gt; 55.86274509803921
median(num_friends2) # less sensitive to outliers: 6.0 =&gt; 6.0

</code></pre>
<p>You may also used <code>quantiles</code> to describe your data. Whenever you&rsquo;ve heard &ldquo;X percentile&rdquo;, that is a description of quantiles relative to 100. In fact, the median is the 50th percentile (where 50% of the data lies below this point and 50% lies above).</p>
<p>Because <code>quantile</code> is a position from 0-100, the second argument is a float from 0.0 to 1.0. We&rsquo;ll use that float to multiply with the length of the list. Then we&rsquo;ll wrap in <code>int</code> to create an integer index which we&rsquo;ll use on a sorted xs to find the quantile.</p>
<pre><code class="language-python">def quantile(xs: List[float], p: float) -&gt; float:
    &quot;&quot;&quot;Returns the pth-percentile value in x&quot;&quot;&quot;
    p_index = int(p * len(xs))  
    return sorted(xs)[p_index]
    
assert quantile(num_friends, 0.10) == 1
assert quantile(num_friends, 0.25) == 3
assert quantile(num_friends, 0.75) == 9
assert quantile(num_friends, 0.90) == 13
</code></pre>
<p>Finally, we have the <strong>mode</strong>, which looks at the most common values. First, we use the <code>Counter</code> method on our list parameter and since Counter is a subclass of <code>dict</code> we have access to methods like <code>values()</code> to find all the values and <code>items()</code> to find key value pairs.</p>
<p>We define <code>max_count</code> to find the max value (22), then the function returns a list comprehension which loops through <code>counts.items()</code> to find the key associated with the max_count (22). That is 1 and 6, meaning twenty-two people (the <strong>mode</strong>) had one or six friends.</p>
<pre><code class="language-python">def mode(x: List[float]) -&gt; List[float]:
    &quot;&quot;&quot;Returns a list, since there might be more than one mode&quot;&quot;&quot;
    counts = Counter(x)
    max_count = max(counts.values())
    return [x_i for x_i, count in counts.items() if count == max_count]
    

assert set(mode(num_friends)) == {1, 6}
</code></pre>
<p>Because we had already used Counter on <code>num_friends</code> previously (see <code>friend_counts</code>), we could have just called the <code>most_common(2)</code> method to get the same results:</p>
<pre><code class="language-python">mode(num_friends) # [6, 1]
friend_counts.most_common(2) # [(6, 22), (1, 22)]
</code></pre>
<h3 id="dispersion">Dispersion</h3>
<p>Aside from our data&rsquo;s central tendencies, we&rsquo;ll also want to understand it&rsquo;s spread or dispersion. The tools to do this are <code>data_range</code>, <code>variance</code>, <code>standard deviation</code> and <code>interquartile range</code>.</p>
<p>Range is a straightforward max value minus min value.</p>
<p>Variance measures how far a 
<a href="https://en.wikipedia.org/wiki/Variance" target="_blank" rel="noopener">set of numbers is from their average value</a>. What&rsquo;s more interesting, for our purpose, is how we need to borrow the functions we had previously built in the 
<a href="https://paulapivat.com/post/dsfs_4/" target="_blank" rel="noopener">linear algebra</a> post to create the variance function.</p>
<p>If you look at its wikipedia page, <strong>variance</strong> is the <em>squared deviation</em> of a variable from its mean.</p>
<p>First, we&rsquo;ll need to create the <code>de_mean</code> function that takes a list of numbers and subtract from all numbers in the list, the mean value (this gives us the deviation from the mean).</p>
<p>Then, we&rsquo;ll <code>sum_of_squares</code> all those deviations, which means we&rsquo;ll take all the values, multiply them with itself (square it), then add the values (and divide by length of the list minus one) to get the variance.</p>
<p>Recall that the <code>sum_of_squares</code> is a special case of the <code>dot</code> product function.</p>
<pre><code class="language-python"># variance

from typing import List

Vector = List[float]

# see vectors.py in chapter 4 for dot and sum_of_squares

def dot(v: Vector, w: Vector) -&gt; float:
    &quot;&quot;&quot;Computes v_1 * w_1 + ... + v_n * w_n&quot;&quot;&quot;
    assert len(v) == len(w), &quot;vectors must be the same length&quot;
    return sum(v_i * w_i for v_i, w_i in zip(v,w))
    
def sum_of_squares(v: Vector) -&gt; float:
    &quot;&quot;&quot;Returns v_1 * v_1 + ... + v_n * v_n&quot;&quot;&quot;
    return dot(v,v)
    
def de_mean(xs: List[float]) -&gt; List[float]:
    &quot;&quot;&quot;Translate xs by subtracting its mean (so the result has mean 0)&quot;&quot;&quot;
    x_bar = mean(xs)
    return [x - x_bar for x in xs]
    
def variance(xs: List[float]) -&gt; float:
    &quot;&quot;&quot;Almost the average squared deviation from the mean&quot;&quot;&quot;
    assert len(xs) &gt;= 2, &quot;variance requires at least two elements&quot;
    n = len(xs)
    deviations = de_mean(xs)
    return sum_of_squares(deviations) / (n - 1)
    
assert 81.54 &lt; variance(num_friends) &lt; 81.55
</code></pre>
<p>The <strong>variance</strong> is <code>sum_of_squares</code> deviations, which can be tricky to interpret. For example, we have a <code>num_friends</code> with values ranging from 0 to 100.</p>
<blockquote>
<p>What does a variance of 81.54 mean?</p>
</blockquote>
<p>A more common alternative is the <strong>standard deviation</strong>. Here we take the square root of the variance using Python&rsquo;s <code>math</code> module.</p>
<p>With a standard deviation of 9.03, and we know the mean of <code>num_friends</code> is 7.3, anything below 7 + 9 = 16 or 7 - 9 (0 friends) friends is still <em>within a standard deviation of the mean</em>. And we can check by running <code>friend_counts</code> that most people are within a standard deviation of the mean.</p>
<p>On the other hand, we know that someone with 20 friends is <strong>more than one standard deviation</strong> away from the mean.</p>
<pre><code class="language-python">import math

def standard_deviation(xs: List[float]) -&gt; float:
    &quot;&quot;&quot;The standard deviation is the square root of the variance&quot;&quot;&quot;
    return math.sqrt(variance(xs))
    
assert 9.02 &lt; standard_deviation(num_friends) &lt; 9.04
</code></pre>
<p>However, because the <strong>standard deviation</strong> builds on the <strong>variance</strong>, which is dependent on the <strong>mean</strong>, we know that just like the mean, it can be sensitive to outliers, we can use an alternative called the <strong>interquartile range</strong>, which is based on the <strong>median</strong> and less sensitive to outliers.</p>
<p>Specifically, the interquartile range can be used to examine <code>num_friends</code> between the 25th and 75th percentile. A large chunk of people are going to have <em>around 6 friends</em>.</p>
<pre><code class="language-python">def interquartile_range(xs: List[float]) -&gt; float: 
    &quot;&quot;&quot;Returns the difference between the 75%-ile and the 25%-ile&quot;&quot;&quot;
    return quantile(xs, 0.75) - quantile(xs, 0.25)
    
assert interquartile_range(num_friends) == 6
</code></pre>
<p>Now that we describe a single list of data, we&rsquo;ll also want to look at potential relationship between two data sources. For example, we may have a hypothesis that the amount of time spent on the DataScienster social network is somehow related to the number of friends someone has.</p>
<p>We&rsquo;ll examine covariance and correlations next.</p>
<h2 id="correlation">Correlation</h2>
<p>If variance is how much a <em>single</em> set of numbers deviates from its mean (i.e., see <code>de_mean</code> above), then <strong>covariance</strong> measures how two sets of numbers vary from <em>their</em> means. With the idea that if they co-vary the same amount, then they could be related.</p>
<p>Here we&rsquo;ll borrow the <code>dot</code> production function we developed in the 
<a href="https://paulapivat.com/post/dsfs_4/" target="_blank" rel="noopener">linear algebra</a> post.</p>
<p>Moreover, we&rsquo;ll examine if there&rsquo;s a relationship between <code>num_friends</code> and <code>daily_minutes</code> and <code>daily_hours</code> (see above).</p>
<pre><code class="language-python">def covariance(xs: List[float], ys: List[float]) -&gt; float:
    assert len(xs) == len(ys), &quot;xs and ys must have same number of elements&quot;
    return dot(de_mean(xs), de_mean(ys)) / (len(xs) - 1)

assert 22.42 &lt; covariance(num_friends, daily_minutes) &lt; 22.43
assert 22.42 / 60 &lt; covariance(num_friends, daily_hours) &lt; 22.43 / 60
</code></pre>
<p>As with variance, a similar critique can be made of <strong>covariance</strong>, you have to do extra steps to interpret it. For example, the covariance of <code>num_friends</code> and <code>daily_minutes</code> is 22.43.</p>
<blockquote>
<p>What does that mean? Is that considered a strong relationship?</p>
</blockquote>
<p>A more intuitive measure would be a <strong>correlation</strong>:</p>
<pre><code class="language-python">def correlation(xs: List[float], ys: List[float]) -&gt; float:
    &quot;&quot;&quot;Measures how much xs and ys vary in tandem about their means&quot;&quot;&quot;
    stdev_x = standard_deviation(xs)
    stdev_y = standard_deviation(ys)
    if stdev_x &gt; 0 and stdev_y &gt; 0:
        return covariance(xs,ys) / stdev_x / stdev_y
    else:
        return 0 # if no variation, correlation is zero

assert 0.24 &lt; correlation(num_friends, daily_minutes) &lt; 0.25
assert 0.24 &lt; correlation(num_friends, daily_hours) &lt; 0.25
</code></pre>
<p>By dividing out the standard deviation of both input variables, correlation is always between -1 (perfect (anti) correlation) and 1 (perfect correlation). A correlation of 0.24 is relatively weak correlation (although what is considered weak, moderate, strong depends on the context of the data).</p>
<p>One thing to keep in mind is <strong>simpson&rsquo;s paradox</strong> or when the relationship between two variables change when accounting for a third, <strong>confounding</strong> variable. Moreover, we should keep this cliché in mind (it&rsquo;s a cliché for a reason): <strong>correlation does not imply causation</strong>.</p>
<h3 id="summary">Summary</h3>
<p>We are just five chapters in and we can begin to see how we&rsquo;re building the tools <em>now</em>, that we&rsquo;ll use later on. Here&rsquo;s a visual summary of what we&rsquo;ve covered in this post and how it connects to previous posts, namely 
<a href="https://paulapivat.com/post/dsfs_4/" target="_blank" rel="noopener">linear algebra</a> and the 
<a href="https://paulapivat.com/post/dsfs_2/" target="_blank" rel="noopener">python crash course</a>.</p>
<p><img src="./summary.png" alt="summary"></p>
<p>For more content on data science, machine learning, R, Python, SQL and more, 
<a href="https://twitter.com/paulapivat" target="_blank" rel="noopener">find me on Twitter</a>.</p>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/python/">Python</a>
  
  <a class="badge badge-light" href="/tag/data-science/">Data Science</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/dsfs_5/&amp;text=Data%20Science%20from%20Scratch%20%28ch5%29%20-%20Statistics" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/dsfs_5/&amp;t=Data%20Science%20from%20Scratch%20%28ch5%29%20-%20Statistics" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Data%20Science%20from%20Scratch%20%28ch5%29%20-%20Statistics&amp;body=/post/dsfs_5/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/dsfs_5/&amp;title=Data%20Science%20from%20Scratch%20%28ch5%29%20-%20Statistics" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Data%20Science%20from%20Scratch%20%28ch5%29%20-%20Statistics%20/post/dsfs_5/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/dsfs_5/&amp;title=Data%20Science%20from%20Scratch%20%28ch5%29%20-%20Statistics" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/paulapivat/avatar_hu63a07477d78c9be41fad7b90b509fc17_91571_270x270_fill_q90_lanczos_center.jpg" alt="paulapivat">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/">paulapivat</a></h5>
        <h6 class="card-subtitle">web3 | Bankless DAO</h6>
        <p class="card-text">My interests include data science, machine learning and R/Python programming.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/paulapivat" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/paulapivat/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/paulapivat" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  










  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/sentiment_analysis/">How Positive are Your Facebook Posts?</a></li>
      
      <li><a href="/post/dsfs_8/">Gradient Descent -- Data Science from Scratch (ch8)</a></li>
      
      <li><a href="/post/dsfs_7/">Data Science from Scratch (ch7) - Hypothesis and Inference</a></li>
      
      <li><a href="/post/statistics_probability/">Statistics &amp; Probability in Code</a></li>
      
      <li><a href="/post/dsfs_6/">Data Science from Scratch (ch6) - Probability</a></li>
      
    </ul>
  </div>
  




  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    © 2020 Paul Apivat Hanvongse. All Rights Reserved.
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
